假设现在你作为老板需要办一场活动，为了活跃气氛你让负责人设置了抽奖环节，在一个箱子里面装满写上编号的乒乓球，每个观众都有一次抽奖机会，观众随机从箱子里面拿出一个小球，，根据所抽到的小球编号发放对应的奖品。作为老板肯定需要考虑成本问题，如果所有人都抽中一等奖的话那就亏大发了，那么就需要控制观众中奖的概率。如何控制呢？把每个编号的小球数出来有多少个就能算出来概率了。比如下面这一堆杂乱的小球，现在需要做的事情统计每一种编号小球的数量。

![杂乱的小球](https://raw.githubusercontent.com/Guanngxu/cpp_teaching/main/img/count_sort/1.png)

如何对每种小球的编号进行统计呢？回忆一下整理大堆零钱的场景，从未整理的零钱里面拿出一张，1 角的放一堆，2 角的放在另一堆......那么此处的小球也是如此，准备好不同编号的小桶，比如 5 号小桶就放编号为 5 的小球，6 号小桶就放编号为 6 的小球......

![放小球的小桶](https://raw.githubusercontent.com/Guanngxu/cpp_teaching/main/img/count_sort/2.png)

我们把那些杂乱无章的数字逐一扔到对应的小桶里面，程序具体如何实现这个过程呢？我们可以把数组的下标当作小桶的编号，数组元素用来记录个数。

![装小球](https://raw.githubusercontent.com/Guanngxu/cpp_teaching/main/img/count_sort/3.png)

```cpp
void count_sort(int a[], int len) {
    // 定义一个数组用来当作小桶
    int b[10000] = {0};
    for(int i = 0; i < len; i++) {
        b[a[i]]++;
    }
}
```

现在得到了一排小桶，每个小桶都统计好了具体编号小球的个数，下一步即将这些小球一个一个拿出来。要注意的是现在我们关注的不是原数组了，关注的是这一排被编上号码的小桶了，每一个小桶都得查看，比如 8 号小桶存的是 3，那就说明需要拿 3 次 8 出来。

![取数](https://raw.githubusercontent.com/Guanngxu/cpp_teaching/main/img/count_sort/3.png)

```cpp
void count_sort(int a[], int len) {
    // 定义一个数组用来当作小桶
    int b[10000] = {0};
    for(int i = 0; i < len; i++) {
        b[a[i]]++;
    }
    // 小桶是 b，逐个查看小桶
    for(int i = 0; i < 10000; i++) {
        // b[i] 存了多少次，就需要拿出来多少次 i
        for(int j = 0; j < b[i]; j++) {
            cout<<i<<endl;
        }
    }
}
```

至此我们的计数排序基本完成了，计数排序的过程可以用下面的动图形象的展示。

![计数排序动图](https://raw.githubusercontent.com/Guanngxu/cpp_teaching/main/img/count_sort/count_sort.gif)

下面给出计数排序的最终代码。

```cpp
void count_sort(int a[], int len) {
    int b[10000] = {0};
    for(int i = 0; i < len; i++) {
        b[a[i]]++;
    }
    int idx = 0;
    for(int i = 0; i < 10000; i++) {
        for(int j = 0; j < b[i]; j++) {
            a[idx++] = i;
        }
    }
}
```